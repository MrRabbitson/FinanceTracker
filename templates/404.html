{% extends "base.html" %}

{% block title %}404 - Страница не найдена{% endblock %}

{% block content %}
<style>
#constellations {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: -1;
}
</style>
<div style="text-align: center; margin: 4rem auto; padding: 2rem;">
    <div class="card">
        <h1 style="font-size: 4rem; margin-bottom: 1rem;">404</h1>
        <h2 style="margin-bottom: 2rem;">Страница не найдена</h2>
        <p style="margin-bottom: 2rem;">Извините, но запрашиваемая страница не существует.</p>
        <a href="{{ url_for('index') }}" class="btn">Вернуться на главную</a>
    </div>
</div>
<canvas id="constellations"></canvas>
<script>
const canvas = document.getElementById('constellations');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const constellations = [];
const numConstellations = Math.floor(Math.random() * 3) + 5;

for (let i = 0; i < numConstellations; i++) {
    const stars = [];
    const numStars = Math.floor(Math.random() * 3) + 3;
    const centerX = Math.random() * canvas.width;
    const centerY = Math.random() * canvas.height;
    for (let j = 0; j < numStars; j++) {
        stars.push({
            x: centerX + (Math.random() - 0.5) * 200,
            y: centerY + (Math.random() - 0.5) * 200,
            originalX: centerX + (Math.random() - 0.5) * 200,
            originalY: centerY + (Math.random() - 0.5) * 200,
            vx: 0,
            vy: 0,
            size: Math.random() * 3 + 1
        });
    }
    constellations.push(stars);
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    constellations.forEach(stars => {
        stars.forEach(star => {
            star.vx += (Math.random() - 0.5) * 0.02;
            star.vy += (Math.random() - 0.5) * 0.02;
            star.x += star.vx;
            star.y += star.vy;
            star.vx *= 0.95;
            star.vy *= 0.95;
        });
        ctx.strokeStyle = '#A78BFA';
        ctx.lineWidth = 1;
        for (let i = 0; i < stars.length - 1; i++) {
            ctx.beginPath();
            ctx.moveTo(stars[i].x, stars[i].y);
            ctx.lineTo(stars[i + 1].x, stars[i + 1].y);
            ctx.stroke();
        }
        if (stars.length > 2) {
            ctx.beginPath();
            ctx.moveTo(stars[stars.length - 1].x, stars[stars.length - 1].y);
            ctx.lineTo(stars[0].x, stars[0].y);
            ctx.stroke();
        }
        stars.forEach(star => {
            ctx.fillStyle = '#8B5CF6';
            ctx.beginPath();
            ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
            ctx.fill();
        });
    });
}

document.addEventListener('mousemove', (e) => {
    const mouseX = e.clientX;
    const mouseY = e.clientY;
    constellations.forEach(stars => {
        stars.forEach(star => {
            const dx = mouseX - star.x;
            const dy = mouseY - star.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            const force = Math.min(30 / distance, 3);
            const angle = Math.atan2(dy, dx);
            star.vx += Math.cos(angle) * force * 0.06;
            star.vy += Math.sin(angle) * force * 0.06;
            const backDx = star.originalX - star.x;
            const backDy = star.originalY - star.y;
            star.vx += backDx * 0.001;
            star.vy += backDy * 0.001;
        });
    });
});

function animate() {
    draw();
    requestAnimationFrame(animate);
}
animate();

draw();
</script>
{% endblock %}